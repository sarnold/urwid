[tox]
envlist =
    py27
    py35
    py36
    py37
    py38
    pypy

[testenv]
usedevelop = true
deps =
    setuptools
    tornado<5.0.0
    coverage
    py27: twisted==16.6.0
    py35: twisted
    py36: twisted
    py37: twisted
    py38: twisted
    pypy: twisted
    py35: trio
    py36: trio
    py37: trio
    py38: trio
    py27: mock
    pypy: mock
commands =
    coverage run ./setup.py test

[testenv:dev]
skip_install = true
passenv =
    pythonLocation
    CI
    PIP_DOWNLOAD_CACHE

deps =
    pip>=20.0.1
    path
    -r requirements.txt

commands =
    #python -c "import path; path.Path('build').rmtree_p()"
    #python setup.py test
    pip install -e .
    # use  --capture=no to see all the doctest output
    #python -m pytest -v urwid --cov urwid --cov-report term-missing
    python -m pytest -v --deselect urwid/tests/test_vterm.py::TermTest
